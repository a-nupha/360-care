{"remainingRequest":"/Users/asupreyaporn/Downloads/vue-barcode-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/asupreyaporn/Downloads/vue-barcode-master/src/views/Scan.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/asupreyaporn/Downloads/vue-barcode-master/src/views/Scan.vue","mtime":1557043206000},{"path":"/Users/asupreyaporn/Downloads/vue-barcode-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/asupreyaporn/Downloads/vue-barcode-master/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/asupreyaporn/Downloads/vue-barcode-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/asupreyaporn/Downloads/vue-barcode-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { toNumber } from 'lodash'\nimport {\n  QuaggaScanner,\n} from 'vue-quaggajs';\nimport Axios from 'axios';\nimport Quagga from 'quagga';\nimport moment from 'moment'\n// import swal from 'sweetalert';\nimport { sync } from 'vuex-pathify'\n// import store from '../store/store'\nimport controlData from './getApiData/controlData'\nimport functions from '../plugins/functions'\n\n\nexport default {\n  name: 'VueBarcodeTest',\n  data() {\n    return {\n      cate_value: '',\n      time: moment().format('hmmss'),\n      nowDate: functions.moment(moment().format('YYYYMMDD')),\n      select: '01',\n      items: [\n        'ขาย',\n        'สูญหาย',\n        'ชำรุด',\n      ],\n      disabledApi: false,\n      Store: this.$store.state,\n      cost: null,\n      price: null,\n      qty: null,\n      detailItems: null,\n      dialogScan: false,\n      model: 'tab-2',\n      decoder: {\n        readers: ['ean_reader', 'ean_8_reader', 'code_39_reader', 'code_39_vin_reader', 'codabar_reader', 'upc_reader', 'upc_e_reader', 'i2of5_reader', '2of5_reader', 'code_93_reader'],\n      },\n      databarcode: null,\n      readerSize: {\n        width: 50,\n        height: 100,\n      },\n      detecteds: [],\n      getCate: null,\n    };\n  },\n  components: {\n    QuaggaScanner,\n  },\n  watch: {\n    async databarcode() {\n      if (this.databarcode.length === 13) {\n        console.log('this.Store.dataBranch[0].branch_id', this.Store.dataBranch[0].branch_id)\n        // await controlData.getDataBarcode(this.databarcode, this.Store.dataBranch[0].branch_id).then((response) => {\n        //   console.log(response.data)\n        // });\n        const api = 'https://a-nuphasupit58.000webhostapp.com/php/getDataBarcodeScan.php';\n        const params = new URLSearchParams();\n        params.append('barcode', this.databarcode)\n        const response = await Axios.post(api, params)\n        console.log('response', response)\n        this.name = response.data[0].name\n        this.detailItems = response.data[0].desc\n        // eslint-disable-next-line prefer-destructuring\n        this.cate_value = response.data[0]\n        console.log(response.data[0])\n        this.cost = response.data[0].cost\n        this.price = response.data[0].price\n        if (response.data !== 'error') {\n          this.disabledApi = true\n        }\n      }\n    },\n\n  },\n  computed: {\n    ...sync('*'),\n  },\n  mounted() {\n    controlData.getCate().then((response) => {\n      const retData = response.data\n      this.getCate = retData\n      console.log('daTAaPIsERCH', this.getCate)\n    });\n  },\n  created() {\n  },\n  methods: {\n    closeDialog() {\n      this.name = ''\n      this.detailItems = ''\n      this.cate_value = ''\n      this.cost = ''\n      this.price = ''\n      this.qty = ''\n      this.dialogScan = false\n      this.disabledApi = false\n    },\n    putdata() {\n      console.log('0000000', this.Store.dataBranch[0].branch_id)\n      console.log('time', this.time)\n      // console.log('this.Store.dataBranch[0].pid', this.Store.dataBranch[0].pid)\n      // console.log('this.cate_value.cate_id', this.cate_value.cate_id)\n      // if(this.disabledApi = true ){\n      //   this.cate_value.cate_id = ''\n      //   this.cate_value.cate_id = this.cate_value\n      // }\n      const obj = {\n        barcode: String(this.databarcode),\n        name: String(this.name),\n        desc: String(this.detailItems),\n        cate_id: this.cate_value.cate_id,\n        price: toNumber(this.price),\n        cost: toNumber(this.cost),\n        remark: '',\n        branch_id: toNumber(this.Store.dataBranch[0].branch_id),\n        quantity_stock: toNumber(this.qty),\n        date_in: functions.moment(moment().format('YYYYMMDD')),\n        add_time: moment().format('hmmss'),\n        status_id: String(this.select),\n        approve_id: '01',\n        pid_user: String(this.Store.dataLogin[0].pid),\n        pid_approve: String(this.Store.dataLogin[0].pid),\n      }\n      console.log(obj)\n      this.Store.dataScan.push(obj)\n      // console.log('this.$store.state.dataScan', this.$store.state.dataScan)\n      this.name = ''\n      this.detailItems = ''\n      this.cate_value = ''\n      this.cost = ''\n      this.price = ''\n      this.qty = ''\n      this.dialogScan = false\n      this.disabledApi = false\n    },\n    openQuagga() {\n      this.dialogScan = true\n      this.databarcode = null\n      Quagga.start()\n    },\n    logIt(data) {\n      this.databarcode = data.codeResult.code\n    },\n  },\n}\n",{"version":3,"sources":["Scan.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Scan.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <v-layout>\n<v-layout>\n  <v-flex ma-4>\n  <v-flex ma-5 pa-5>\n <v-btn\n      large\n      block\n      color=\"blue-grey\"\n      class=\"white--text\"\n      @click=\"openQuagga()\"\n    >\n      Scan\n      <v-icon right dark>mdi-barcode-scan</v-icon>\n    </v-btn>\n    </v-flex>\n    </v-flex>\n</v-layout>\n\n    </v-layout>\n<v-dialog v-model=\"dialogScan\"  fullscreen hide-overlay transition=\"dialog-bottom-transition\">\n      <v-toolbar dark color=\"blue\">\n            <v-btn icon dark @click=\"closeDialog()\">\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n            <v-toolbar-title>Settings</v-toolbar-title>\n            <v-spacer></v-spacer>\n            <v-toolbar-items>\n              <v-btn dark flat @click=\"putdata()\">Save</v-btn>\n            </v-toolbar-items>\n            </v-toolbar>\n      <v-card>\n        <v-card-text>\n          <quagga-scanner v-if=\"!databarcode\"\n            :onDetected=\"logIt\" class=\"videoo\" :readerSize=\"readerSize\" :readerType=\"'ean_reader'\">\n            <video class=\"videoo\" ></video>\n            </quagga-scanner>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-layout>\n            <v-flex>\n              <v-layout>\n      <v-flex xs10>\n        <v-text-field type=\"number\" prepend-icon=\" \" :disabled=\"disabledApi\" :counter=\"13\" mask=\"#############\" label=\"Barcode\" v-model=\"databarcode\" />\n      </v-flex>\n    </v-layout>\n    <v-layout>\n      <v-flex xs10>\n        <v-text-field prepend-icon=\" \" label=\"Name\" :disabled=\"disabledApi\" v-model=\"name\" />\n      </v-flex>\n    </v-layout>\n    <v-layout>\n      <v-flex xs10>\n        <v-text-field prepend-icon=\" \" v-model=\"price\" :disabled=\"disabledApi\"\n        type=\"number\"\n        suffix=\"Baht\"  :counter=\"6\" mask=\"######\" name=\"input-7-4\" label=\"Price\"></v-text-field>\n      </v-flex>\n    </v-layout>\n    <v-layout>\n      <v-flex xs10>\n        <v-text-field prepend-icon=\" \" v-model=\"cost\" :disabled=\"disabledApi\"\n        type=\"number\"\n        suffix=\"Baht\"  :counter=\"6\" mask=\"######\" name=\"input-7-4\" label=\"Cost\"></v-text-field>\n      </v-flex>\n    </v-layout>\n    <v-layout>\n      <v-flex xs10>\n        <v-text-field type=\"number\"\n        prepend-icon=\" \" label=\"Qty\" suffix=\"Piece\" :counter=\"7\" mask=\"#######\" v-model=\"qty\" required/>\n      </v-flex>\n    </v-layout>\n    <v-layout>\n      <v-flex xs10>\n      <v-select\n      :disabled=\"disabledApi\"\n                :items=\"getCate\"\n                prepend-icon=\" \"\n                item-value=\"cate_id\"\n                v-model=\"cate_value\"\n                item-text=\"cate_name\"\n                label=\"category\"\n                single-line\n                return-object\n                />\n      </v-flex>\n    </v-layout>\n    <v-layout>\n      <v-flex xs10>\n        <v-textarea prepend-icon=\" \" v-model=\"detailItems\" :disabled=\"disabledApi\"\n        box name=\"input-7-4\" label=\"Description\" auto-grow></v-textarea>\n      </v-flex>\n    </v-layout>\n            </v-flex>\n          </v-layout>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport { toNumber } from 'lodash'\nimport {\n  QuaggaScanner,\n} from 'vue-quaggajs';\nimport Axios from 'axios';\nimport Quagga from 'quagga';\nimport moment from 'moment'\n// import swal from 'sweetalert';\nimport { sync } from 'vuex-pathify'\n// import store from '../store/store'\nimport controlData from './getApiData/controlData'\nimport functions from '../plugins/functions'\n\n\nexport default {\n  name: 'VueBarcodeTest',\n  data() {\n    return {\n      cate_value: '',\n      time: moment().format('hmmss'),\n      nowDate: functions.moment(moment().format('YYYYMMDD')),\n      select: '01',\n      items: [\n        'ขาย',\n        'สูญหาย',\n        'ชำรุด',\n      ],\n      disabledApi: false,\n      Store: this.$store.state,\n      cost: null,\n      price: null,\n      qty: null,\n      detailItems: null,\n      dialogScan: false,\n      model: 'tab-2',\n      decoder: {\n        readers: ['ean_reader', 'ean_8_reader', 'code_39_reader', 'code_39_vin_reader', 'codabar_reader', 'upc_reader', 'upc_e_reader', 'i2of5_reader', '2of5_reader', 'code_93_reader'],\n      },\n      databarcode: null,\n      readerSize: {\n        width: 50,\n        height: 100,\n      },\n      detecteds: [],\n      getCate: null,\n    };\n  },\n  components: {\n    QuaggaScanner,\n  },\n  watch: {\n    async databarcode() {\n      if (this.databarcode.length === 13) {\n        console.log('this.Store.dataBranch[0].branch_id', this.Store.dataBranch[0].branch_id)\n        // await controlData.getDataBarcode(this.databarcode, this.Store.dataBranch[0].branch_id).then((response) => {\n        //   console.log(response.data)\n        // });\n        const api = 'https://a-nuphasupit58.000webhostapp.com/php/getDataBarcodeScan.php';\n        const params = new URLSearchParams();\n        params.append('barcode', this.databarcode)\n        const response = await Axios.post(api, params)\n        console.log('response', response)\n        this.name = response.data[0].name\n        this.detailItems = response.data[0].desc\n        // eslint-disable-next-line prefer-destructuring\n        this.cate_value = response.data[0]\n        console.log(response.data[0])\n        this.cost = response.data[0].cost\n        this.price = response.data[0].price\n        if (response.data !== 'error') {\n          this.disabledApi = true\n        }\n      }\n    },\n\n  },\n  computed: {\n    ...sync('*'),\n  },\n  mounted() {\n    controlData.getCate().then((response) => {\n      const retData = response.data\n      this.getCate = retData\n      console.log('daTAaPIsERCH', this.getCate)\n    });\n  },\n  created() {\n  },\n  methods: {\n    closeDialog() {\n      this.name = ''\n      this.detailItems = ''\n      this.cate_value = ''\n      this.cost = ''\n      this.price = ''\n      this.qty = ''\n      this.dialogScan = false\n      this.disabledApi = false\n    },\n    putdata() {\n      console.log('0000000', this.Store.dataBranch[0].branch_id)\n      console.log('time', this.time)\n      // console.log('this.Store.dataBranch[0].pid', this.Store.dataBranch[0].pid)\n      // console.log('this.cate_value.cate_id', this.cate_value.cate_id)\n      // if(this.disabledApi = true ){\n      //   this.cate_value.cate_id = ''\n      //   this.cate_value.cate_id = this.cate_value\n      // }\n      const obj = {\n        barcode: String(this.databarcode),\n        name: String(this.name),\n        desc: String(this.detailItems),\n        cate_id: this.cate_value.cate_id,\n        price: toNumber(this.price),\n        cost: toNumber(this.cost),\n        remark: '',\n        branch_id: toNumber(this.Store.dataBranch[0].branch_id),\n        quantity_stock: toNumber(this.qty),\n        date_in: functions.moment(moment().format('YYYYMMDD')),\n        add_time: moment().format('hmmss'),\n        status_id: String(this.select),\n        approve_id: '01',\n        pid_user: String(this.Store.dataLogin[0].pid),\n        pid_approve: String(this.Store.dataLogin[0].pid),\n      }\n      console.log(obj)\n      this.Store.dataScan.push(obj)\n      // console.log('this.$store.state.dataScan', this.$store.state.dataScan)\n      this.name = ''\n      this.detailItems = ''\n      this.cate_value = ''\n      this.cost = ''\n      this.price = ''\n      this.qty = ''\n      this.dialogScan = false\n      this.disabledApi = false\n    },\n    openQuagga() {\n      this.dialogScan = true\n      this.databarcode = null\n      Quagga.start()\n    },\n    logIt(data) {\n      this.databarcode = data.codeResult.code\n    },\n  },\n}\n</script>\n<style>\n\n\n</style>\n"]}]}