{"remainingRequest":"/Users/asupreyaporn/Downloads/vue-barcode-master/node_modules/babel-loader/lib/index.js!/Users/asupreyaporn/Downloads/vue-barcode-master/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/asupreyaporn/Downloads/vue-barcode-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/asupreyaporn/Downloads/vue-barcode-master/src/views/deleteStock.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/asupreyaporn/Downloads/vue-barcode-master/src/views/deleteStock.vue","mtime":1557043206000},{"path":"/Users/asupreyaporn/Downloads/vue-barcode-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/asupreyaporn/Downloads/vue-barcode-master/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/asupreyaporn/Downloads/vue-barcode-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/asupreyaporn/Downloads/vue-barcode-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/Users/asupreyaporn/Downloads/vue-barcode-master/node_modules/@babel/runtime/regenerator\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapActions } from 'vuex';\nimport Axios from 'axios';\nimport { toNumber } from 'lodash';\nimport moment from 'moment';\nimport { QuaggaScanner } from 'vue-quaggajs';\nimport Quagga from 'quagga';\nimport { sync } from 'vuex-pathify';\nimport functions from '../plugins/functions';\nimport controlData from './getApiData/controlData';\nexport default {\n  data: function data() {\n    return {\n      disbleBtn: false,\n      nowDate: functions.moment(moment().format('YYYYMMDD')),\n      valid: true,\n      openDialogNotmatch: false,\n      nameItems: '',\n      timeout: 5000,\n      select: 'ขาย',\n      openDialog: false,\n      items: ['ขาย', 'สูญหาย', 'ชำรุด'],\n      headers: [{\n        text: 'Barcode',\n        align: 'center',\n        sortable: false,\n        value: 'name'\n      }, {\n        text: 'name',\n        value: 'calories',\n        align: 'center',\n        sortable: false\n      }, {\n        text: 'QTY',\n        value: 'calories',\n        align: 'center',\n        sortable: false\n      }, {\n        text: 'Delete',\n        value: 'calories',\n        align: 'center',\n        sortable: false\n      }],\n      cost: null,\n      price: null,\n      qty: 1,\n      detailItems: null,\n      dialogScan: false,\n      databarcode: null,\n      readerSize: {\n        width: 50,\n        height: 100\n      },\n      detecteds: [],\n      getdataTable: [],\n      msgSnackBar: '',\n      snackฺฺฺBarBool: false,\n      Store: this.$store.state,\n      confirmData: '',\n      qtyBase: '',\n      getDataBarcode: [],\n      disble: false,\n      time: moment().format('hmmss'),\n      qtyRules: [function (v) {\n        return !!v || 'qty is required';\n      }]\n    };\n  },\n  components: {\n    QuaggaScanner: QuaggaScanner\n  },\n  created: function () {\n    var _created = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.getBranch();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function created() {\n      return _created.apply(this, arguments);\n    };\n  }(),\n  computed: _objectSpread({}, sync('*'), {\n    rules: function rules() {\n      var _this = this;\n\n      var rules = [];\n\n      if (Number(this.qtyBase)) {\n        var rule = function rule(v) {\n          return Number(_this.qtyBase) >= Number(_this.qty) || 'Values do not match';\n        };\n\n        rules.push(rule);\n      }\n\n      return rules;\n    }\n  }),\n  watch: {\n    databarcode: function () {\n      var _databarcode = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var api, params, response;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(this.databarcode.length === 13)) {\n                  _context2.next = 19;\n                  break;\n                }\n\n                console.log('this.Store.dataBranch[0].branch_id', this.Store.dataBranch[0].branch_id);\n                api = 'https://a-nuphasupit58.000webhostapp.com/php/getDataBarcode.php';\n                params = new URLSearchParams();\n                params.append('barcode', this.databarcode);\n                console.log('this.Store.dataBranch[0].branch_id', this.Store.dataBranch[0].branch_id);\n                params.append('branch_id', this.Store.dataBranch[0].branch_id);\n                _context2.next = 9;\n                return Axios.post(api, params);\n\n              case 9:\n                response = _context2.sent;\n                console.log('response', response);\n                this.nameItems = response.data[0].name;\n                this.detailItems = response.data[0].desc;\n                this.qtyBase = response.data[0].quantity_stock;\n                this.price = response.data[0].price;\n                this.cost = response.data[0].cost;\n                console.log('price', response.data[0].price);\n                console.log('cost', response.data[0].cost);\n\n                if (response.data !== 'error') {\n                  this.disbleBtn = true;\n                } else {\n                  this.openDialogNotmatch = true;\n                }\n\n              case 19:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function databarcode() {\n        return _databarcode.apply(this, arguments);\n      };\n    }()\n  },\n  methods: _objectSpread({}, mapActions({\n    SetDataMenuRequest: 'getApi/SetDataMenuRequest',\n    setDataLogin: 'getApi/setDataLogin'\n  }), {\n    setMenuRequest: function setMenuRequest() {\n      this.openDialog = false;\n      var menu = 'Menu';\n      this.setDataLogin(menu);\n      this.openDialogNotmatch = false;\n      this.Store.dataScanOut = [];\n    },\n    getBranch: function getBranch() {\n      controlData.selectBranch(Number(this.Store.dataLogin[0].rcode_id));\n    },\n    closeDialogScan: function closeDialogScan() {\n      this.dialogScan = false;\n      this.nameItems = '';\n      this.databarcode = '';\n      this.detailItems = '';\n      this.qty = 1;\n      this.disbleBtn = false;\n    },\n    putdata: function putdata() {\n      var obj = {\n        databarcode: this.databarcode,\n        add_date: functions.moment(moment().format('YYYYMMDD')),\n        add_time: moment().format('hmmss'),\n        branch_id: toNumber(this.Store.dataBranch[0].branch_id),\n        quantity: this.qty,\n        name: this.nameItems,\n        status_id: this.select,\n        approve_id: functions.tranStatusCode(String(this.select)),\n        pid_user: String(this.Store.dataLogin[0].pid),\n        pid_approve: String(this.Store.dataLogin[0].pid),\n        detailItems: this.detailItems,\n        price: this.price,\n        cost: this.cost\n      };\n      this.$store.state.dataScanOut.push(obj);\n      this.nameItems = '';\n      this.databarcode = '';\n      this.detailItems = '';\n      this.qty = 1;\n      this.dialogScan = false;\n      this.disbleBtn = false;\n    },\n    openQuagga: function openQuagga() {\n      this.dialogScan = true;\n      this.databarcode = null;\n      Quagga.start();\n    },\n    logIt: function logIt(data) {\n      this.databarcode = data.codeResult.code;\n    },\n    deleteItem: function deleteItem(item) {\n      this.getdataTable = item;\n      this.msgSnackBar = 'Are you sure you want to delete this item?';\n      this.snackฺฺฺBarBool = true;\n    },\n    deleteItemS: function deleteItemS() {\n      var index = this.Store.dataScanOut.indexOf(this.getdataTable);\n      this.Store.dataScanOut.splice(index, 1);\n      this.snackฺฺฺBarBool = false;\n    },\n    confirm: function confirm() {\n      this.openDialog = true;\n      var dataError = [];\n      var dataSecess = [];\n\n      for (var i = 0; i < this.dataScanOut.length; i += 1) {\n        if (String(this.dataScanOut[i].status_id) === 'สูญหาย' || String(this.dataScanOut[i].status_id) === 'ชำรุด') {\n          dataError.push(this.dataScanOut[i]);\n        } else {\n          dataSecess.push(this.dataScanOut[i]);\n        }\n      }\n\n      console.log('dataError', dataError);\n      console.log('dataSecess', dataSecess);\n      this.insertSecess(dataSecess, dataError);\n    },\n    insertSecess: function insertSecess(dataSecess, dataError) {\n      var api = 'https://a-nuphasupit58.000webhostapp.com/php/insertItemsOut.php';\n      var dataParams = new URLSearchParams();\n      var dataSecessInsert = JSON.stringify(dataSecess);\n      var dataErrorInsert = JSON.stringify(dataError);\n      dataParams.append('dataSuccess', dataSecessInsert);\n      dataParams.append('dataError', dataErrorInsert);\n      Axios.post(api, dataParams).then(function (response) {\n        console.log(response.data);\n      });\n    },\n    validateField: function validateField() {\n      this.$refs.form.validate();\n    }\n  })\n};",{"version":3,"sources":["deleteStock.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <v-layout>\n<v-layout>\n  <v-flex >\n  <v-flex >\n <v-btn\n      large\n      block\n      color=\"blue-grey\"\n      class=\"white--text\"\n      @click=\"openQuagga()\"\n    >\n      Scan\n      <v-icon right dark>mdi-barcode-scan</v-icon>\n    </v-btn>\n    </v-flex>\n    <v-toolbar flat color=\"white\">\n                                    <v-toolbar-title>\n                                        <v-flex xs12 subheader class=\"blue--text\" ma-1>\n                                            sale\n                                        </v-flex>\n                                    </v-toolbar-title>\n                                    <v-divider class=\"mx-2\" inset vertical></v-divider>\n                                    <v-spacer></v-spacer>\n                                    <div v-if=\"dataScanOut != ''\">\n                                    <v-btn class=\"white--text\" color=\"blue\" @click=\"confirm()\">confirm</v-btn>\n                                    </div>\n                                </v-toolbar>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"dataScanOut\"\n      :loading=\"true\"\n      class=\"elevation-1\"\n    >\n      <v-progress-linear slot=\"progress\" color=\"blue\" indeterminate></v-progress-linear>\n      <template slot=\"items\" slot-scope=\"props\">\n        <td class=\"text-xs-center\">{{ props.item.databarcode }}</td>\n        <td class=\"text-xs-center\">{{ props.item.name }}</td>\n        <td class=\"text-xs-center\">{{ props.item.quantity }}</td>\n        <td><v-btn icon>\n        <v-icon color=\"red\" @click=\"deleteItem(props.item)\">mdi-delete</v-icon>            </v-btn></td>\n      </template>\n    </v-data-table>\n    </v-flex>\n</v-layout>\n    </v-layout>\n<v-dialog v-model=\"dialogScan\"  fullscreen hide-overlay transition=\"dialog-bottom-transition\">\n      <v-toolbar dark color=\"blue\">\n            <v-btn icon dark @click=\"closeDialogScan()\">\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n            <v-toolbar-title>Settings</v-toolbar-title>\n            <v-spacer></v-spacer>\n            <v-toolbar-items>\n              <v-btn dark flat @click=\"putdata()\" :disabled=\"!valid\">Save</v-btn>\n            </v-toolbar-items>\n            </v-toolbar>\n      <v-card>\n        <v-card-text>\n          <quagga-scanner v-if=\"!databarcode\"\n            :onDetected=\"logIt\" class=\"videoo\" :readerSize=\"readerSize\" :readerType=\"'ean_reader'\">\n            <video class=\"videoo\" ></video>\n            </quagga-scanner>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-layout>\n            <v-flex>\n              <v-layout>\n      <v-flex xs10>\n        <v-text-field type=\"number\" :disabled=\"disbleBtn\" prepend-icon=\" \" label=\"Barcode\" :counter=\"13\" mask=\"#############\" v-model=\"databarcode\" />\n      </v-flex>\n    </v-layout>\n    <v-layout>\n      <v-flex xs10>\n        <v-text-field :disabled=\"disbleBtn\" prepend-icon=\" \" label=\"Name\" v-model=\"nameItems\" />\n      </v-flex>\n    </v-layout>\n    <v-layout>\n      <v-flex xs10>\n        <v-form\n      ref=\"form\"\n      v-model=\"valid\"\n      lazy-validation\n    >\n        <v-text-field prepend-icon=\" \" suffix=\"Piece\" label=\"Qty\" :counter=\"7\" mask=\"#######\" v-model=\"qty\" :rules=\"rules\" required/>\n        </v-form>\n      </v-flex>\n    </v-layout>\n    <v-layout>\n      <v-flex xs10>\n        <v-combobox\n          v-model=\"select\"\n          :items=\"items\"\n          prepend-icon=\" \"\n          label=\"Event\"\n        ></v-combobox>\n      </v-flex>\n    </v-layout>\n    <v-layout>\n      <v-flex xs10>\n        <v-textarea prepend-icon=\" \" :disabled=\"disbleBtn\" v-model=\"detailItems\" box name=\"input-7-4\" label=\"Description\" auto-grow></v-textarea>\n      </v-flex>\n    </v-layout>\n            </v-flex>\n          </v-layout>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n     <v-dialog v-model=\"openDialog\" persistent max-width=\"400px\">\n        <v-card>\n          <v-flex>\n          <v-card-title\n          :class=\"'green'\"\n          primary-title\n          flat>\n          <v-icon class=\"mr-3\" color=\"white\">mdi-information</v-icon>\n          <v-flex class=\"\"><v-flex class=\"white--text\">INFORMATION</v-flex></v-flex>\n        </v-card-title>\n          <v-card-title>\n            <v-layout justify-center><span>success</span></v-layout>\n          </v-card-title>\n          </v-flex>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"blue darken-1\" flat @click=\"setMenuRequest()\">Close</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n\n\n\n\n\n<v-dialog v-model=\"openDialogNotmatch\" persistent max-width=\"400px\">\n        <v-card>\n          <v-flex>\n          <v-card-title\n          :class=\"'red'\"\n          primary-title\n          flat>\n          <v-icon class=\"mr-3\" color=\"white\">mdi-information</v-icon>\n          <v-flex class=\"\"><v-flex class=\"white--text\">INFORMATION</v-flex></v-flex>\n        </v-card-title>\n          <v-card-title>\n            <v-layout justify-center><span>barcode is not match</span></v-layout>\n          </v-card-title>\n          </v-flex>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"blue darken-1\" flat @click=\"setMenuRequest()\">Close</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n\n\n\n\n\n\n\n\n    <v-snackbar\n    :vertical=\"true\"\n    v-model=\"snackฺฺฺBarBool\"\n    color=\"orange\"\n    :timeout=\"timeout\"\n    bottom>\n    <v-flex >{{msgSnackBar}}</v-flex>\n    <v-layout><v-flex><v-btn\n        color=\"white\"\n        flat\n        @click=\"snackฺฺฺBarBool = false \"\n      >\n        no\n      </v-btn></v-flex>\n    <v-flex><v-btn\n        color=\"white\"\n        flat\n        @click=\"deleteItemS()\"\n      >\n        yes\n      </v-btn></v-flex></v-layout>\n  </v-snackbar>\n  </div>\n</template>\n\n<script>\nimport {\n  mapActions,\n} from 'vuex'\nimport Axios from 'axios';\nimport { toNumber } from 'lodash'\nimport moment from 'moment'\nimport {\n  QuaggaScanner,\n} from 'vue-quaggajs';\nimport Quagga from 'quagga';\nimport { sync } from 'vuex-pathify'\nimport functions from '../plugins/functions'\nimport controlData from './getApiData/controlData'\n\nexport default {\n  data() {\n    return {\n      disbleBtn: false,\n      nowDate: functions.moment(moment().format('YYYYMMDD')),\n      valid: true,\n      openDialogNotmatch: false,\n      nameItems: '',\n      timeout: 5000,\n      select: 'ขาย',\n      openDialog: false,\n      items: [\n        'ขาย',\n        'สูญหาย',\n        'ชำรุด',\n      ],\n      headers: [\n        {\n          text: 'Barcode',\n          align: 'center',\n          sortable: false,\n          value: 'name',\n        },\n        {\n          text: 'name', value: 'calories', align: 'center', sortable: false,\n        },\n        {\n          text: 'QTY', value: 'calories', align: 'center', sortable: false,\n        },\n        {\n          text: 'Delete', value: 'calories', align: 'center', sortable: false,\n        },\n      ],\n      cost: null,\n      price: null,\n      qty: 1,\n      detailItems: null,\n      dialogScan: false,\n      databarcode: null,\n      readerSize: {\n        width: 50,\n        height: 100,\n      },\n\n      detecteds: [],\n      getdataTable: [],\n      msgSnackBar: '',\n      snackฺฺฺBarBool: false,\n      Store: this.$store.state,\n\n      confirmData: '',\n      qtyBase: '',\n      getDataBarcode: [],\n      disble: false,\n      time: moment().format('hmmss'),\n      qtyRules: [\n        v => !!v || 'qty is required' ],\n    };\n  },\n  components: {\n    QuaggaScanner,\n  },\n  async created() {\n    await this.getBranch()\n  },\n  computed: {\n    ...sync('*'),\n    rules() {\n      const rules = []\n      if (Number(this.qtyBase)) {\n        const rule = v => (Number(this.qtyBase)) >= Number(this.qty) || 'Values do not match'\n        rules.push(rule)\n      }\n      return rules\n    },\n\n  },\n  watch: {\n    async databarcode() {\n      if (this.databarcode.length === 13) {\n        console.log('this.Store.dataBranch[0].branch_id', this.Store.dataBranch[0].branch_id)\n        const api = 'https://a-nuphasupit58.000webhostapp.com/php/getDataBarcode.php';\n        const params = new URLSearchParams();\n        params.append('barcode', this.databarcode)\n        console.log('this.Store.dataBranch[0].branch_id', this.Store.dataBranch[0].branch_id)\n        params.append('branch_id', this.Store.dataBranch[0].branch_id)\n        const response = await Axios.post(api, params)\n        console.log('response', response)\n        this.nameItems = response.data[0].name\n        this.detailItems = response.data[0].desc\n        this.qtyBase = response.data[0].quantity_stock\n        this.price = response.data[0].price\n        this.cost = response.data[0].cost\n        console.log('price', response.data[0].price)\n        console.log('cost', response.data[0].cost)\n        if (response.data !== 'error') {\n          this.disbleBtn = true\n        } else {\n          this.openDialogNotmatch = true\n        }\n      }\n    },\n\n  },\n  methods: {\n    ...mapActions({\n      SetDataMenuRequest: 'getApi/SetDataMenuRequest',\n      setDataLogin: 'getApi/setDataLogin',\n    }),\n    setMenuRequest() {\n      this.openDialog = false\n      const menu = 'Menu'\n      this.setDataLogin(menu);\n      this.openDialogNotmatch = false\n      this.Store.dataScanOut = []\n    },\n    getBranch() {\n      controlData.selectBranch(Number(this.Store.dataLogin[0].rcode_id))\n    },\n    closeDialogScan() {\n      this.dialogScan = false\n      this.nameItems = ''\n      this.databarcode = ''\n      this.detailItems = ''\n      this.qty = 1\n      this.disbleBtn = false\n    },\n    putdata() {\n      const obj = {\n        databarcode: this.databarcode,\n        add_date: functions.moment(moment().format('YYYYMMDD')),\n        add_time: moment().format('hmmss'),\n        branch_id: toNumber(this.Store.dataBranch[0].branch_id),\n        quantity: this.qty,\n        name: this.nameItems,\n        status_id: this.select,\n        approve_id: functions.tranStatusCode(String(this.select)),\n        pid_user: String(this.Store.dataLogin[0].pid),\n        pid_approve: String(this.Store.dataLogin[0].pid),\n        detailItems: this.detailItems,\n        price: this.price,\n        cost: this.cost,\n      }\n      this.$store.state.dataScanOut.push(obj)\n      this.nameItems = ''\n      this.databarcode = ''\n      this.detailItems = ''\n      this.qty = 1\n      this.dialogScan = false\n      this.disbleBtn = false\n    },\n    openQuagga() {\n      this.dialogScan = true\n      this.databarcode = null\n      Quagga.start()\n    },\n    logIt(data) {\n      this.databarcode = data.codeResult.code\n    },\n    deleteItem(item) {\n      this.getdataTable = item\n      this.msgSnackBar = 'Are you sure you want to delete this item?'\n      this.snackฺฺฺBarBool = true\n    },\n    deleteItemS() {\n      const index = this.Store.dataScanOut.indexOf(this.getdataTable)\n      this.Store.dataScanOut.splice(index, 1)\n      this.snackฺฺฺBarBool = false\n    },\n    confirm() {\n      this.openDialog = true\n      const dataError = []\n      const dataSecess = []\n      for (let i = 0; i < this.dataScanOut.length; i += 1) {\n        if (String(this.dataScanOut[i].status_id) === 'สูญหาย' || String(this.dataScanOut[i].status_id) === 'ชำรุด') {\n          dataError.push(this.dataScanOut[i])\n        } else {\n          dataSecess.push(this.dataScanOut[i])\n        }\n      }\n      console.log('dataError', dataError)\n      console.log('dataSecess', dataSecess)\n      this.insertSecess(dataSecess, dataError)\n    },\n    insertSecess(dataSecess, dataError) {\n      const api = 'https://a-nuphasupit58.000webhostapp.com/php/insertItemsOut.php';\n      const dataParams = new URLSearchParams();\n      const dataSecessInsert = JSON.stringify(dataSecess)\n      const dataErrorInsert = JSON.stringify(dataError)\n      dataParams.append('dataSuccess', dataSecessInsert)\n      dataParams.append('dataError', dataErrorInsert)\n      Axios.post(api, dataParams)\n        .then((response) => {\n          console.log(response.data)\n        })\n    },\n\n    validateField() {\n      this.$refs.form.validate()\n    },\n  },\n}\n</script>\n"],"sourceRoot":"src/views"}]}